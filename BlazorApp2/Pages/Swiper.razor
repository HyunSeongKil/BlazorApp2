@page "/swiper"
@inject IJSRuntime JsRuntime;
@inject HttpClient hc;


<style>
    .swiper-slide {
        text-align: center;
        font-size: 18px;
        background: #efefef;
        /* Center slide text vertically */
        display: -webkit-box;
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
        -webkit-box-align: center;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;

        margin-top: 10px;
    }
</style>



<h3>Swiper</h3>

<div class="swiper-container">
    <div class="swiper-wrapper">
        @foreach (Item item in items)
        {
            <div class="swiper-slide">
                <div>Slide @item.No</div>
                <div>@item.Text</div>
            </div>
        }
    </div>

    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
</div>

<button @onclick="@AddItem">add item</button>



@code {
    IList<Item> items = new List<Item>();
    static int no = 0;
    Random rnd = new Random();

    /// <summary>
    /// 이 페이지 렌더링 후 호출됨
    /// </summary>
    /// <param name="firstRender">첫번째 렌더링인지 여부</param>
    /// <returns></returns>
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        //다른 페이지에서 이 페이지로 들어온 처음이면 true. 이 페이지에서 렌더링이 계속된거면 false
        if (firstRender)
        {
        }
    }

    async void AddItem()
    {
        var dic = await hc.GetFromJsonAsync<Dictionary<string, object>>("https://cat-fact.herokuapp.com/facts/random");
        Console.WriteLine(dic);

        items.Add(new Item()
        {
            No = no++,
            Id = dic["_id"].ToString(),
            User = dic["user"].ToString(),
            Text = dic["text"].ToString(),
            CreatedAt = dic["createdAt"].ToString()
        });



        StateHasChanged();
    }



    class Item
    {
        public int No { get; set; }
        public string Id { get; set; }
        public string Text { get; set; }
        public string User { get; set; }
        public string CreatedAt { get; set; }
    }
}
